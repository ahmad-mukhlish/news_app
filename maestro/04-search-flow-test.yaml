appId: com.dhealth.news.news_app
---
# Search Flow Test: Tests search functionality and autocomplete
# Verifies search input, suggestions, results, and clearing

- launchApp:
    clearState: true

- waitForAnimationToEnd:
    timeout: 10000

# Navigate to Search tab
- tapOn:
    point: "30%,91%"
- waitForAnimationToEnd

# Verify search screen is visible
- assertVisible: "Search"
- assertVisible: "Search news..."
- assertVisible: "Enter keywords to search for news"

# Test 1: Search for "technology"
- tapOn: "Search news..."
- inputText: "technology"

# Wait for suggestions to appear (with debounce delay)
- waitForAnimationToEnd:
    timeout: 2000

# Submit search query
- pressKey: Enter

# Wait for search results to load
- extendedWaitUntil:
    visible: ".*"
    timeout: 15000

# Verify search results loaded
- scroll:
    direction: DOWN

# Test 2: Clear search button
- tapOn:
    id: ".*clear.*"
    index: 0
- assertVisible: "Enter keywords to search for news"

# Test 3: Search for "bitcoin"
- tapOn: "Search news..."
- inputText: "bitcoin"
- waitForAnimationToEnd:
    timeout: 2000

# Submit search
- pressKey: Enter

# Wait for results
- extendedWaitUntil:
    visible: ".*"
    timeout: 15000

# Scroll through results
- scroll:
    direction: DOWN

- scroll:
    direction: DOWN

# Test 4: New search without clearing
- tapOn: "Search news..."
- inputText: "sports"
- pressKey: Enter

# Wait for new results
- waitForAnimationToEnd:
    timeout: 5000

# Test 5: Clear and verify empty state
- tapOn:
    id: ".*clear.*"
    index: 0
- assertVisible: "Enter keywords to search for news"

# Verify we're still on search screen
- assertVisible: "Search"

appId: com.dhealth.news.news_app
---
# Categories Offline Test: Tests category filtering when network is unavailable
# Verifies error handling when attempting to load categories offline

- launchApp:
    clearState: true

- waitForAnimationToEnd:
    timeout: 5000

# Navigate to Categories tab
- tapOn:
    text: ".*Categories tab.*"
- waitForAnimationToEnd

# Verify categories screen is visible
- assertVisible: "Categories"

# Wait for potential error message
- waitForAnimationToEnd:
    timeout: 5000

# Check for error message or no results
- runFlow:
    when:
      visible: "No internet connection"
    commands:
      - assertVisible: "No internet connection"

# Alternative: Check for other error messages
- runFlow:
    when:
      visible: "Failed to load"
    commands:
      - assertVisible: "Failed to load"

# Try to select a category in offline mode
- tapOn: "Business"
- waitForAnimationToEnd:
    timeout: 5000

# Verify error state - articles should not load
- assertVisible: "Categories"

# Try another category
- tapOn: "Technology"
- waitForAnimationToEnd:
    timeout: 5000

# Navigate away and back
- tapOn:
    text: ".*Home.*Tab.*"
- waitForAnimationToEnd

- tapOn:
    text: ".*Categories tab.*"
- waitForAnimationToEnd

- assertVisible: "Categories"

appId: com.dhealth.news.news_app
---
# Notifications Test: Tests notification list and interactions
# Verifies notification display, marking as read, and navigation

- launchApp:
    clearState: true

- waitForAnimationToEnd:
    timeout: 10000

# Navigate to Notifications tab
- tapOn:
    point: "70%,91%"
- waitForAnimationToEnd

# Verify notifications screen is visible
- assertVisible: "Notifications"

# Test depends on whether notifications exist or not
# This test handles both empty and populated states

# Try to detect if there are notifications
- runFlow:
    when:
      visible: "No notifications yet"
    commands:
      # Empty state - verify empty message
      - assertVisible: "No notifications yet"
      - scroll:
          direction: DOWN
      - scroll:
          direction: UP

# If notifications exist, test interactions
- runFlow:
    when:
      visible: "Mark all read"
    commands:
      # Notifications exist - test mark all read
      - scroll:
          direction: DOWN
      - scroll:
          direction: UP

      # Tap on first notification
      - tapOn:
          index: 0

      # Wait for notification detail screen
      - waitForAnimationToEnd:
          timeout: 3000

      # Go back to notification list
      - pressKey: Back
      - waitForAnimationToEnd

      # Verify we're back on notifications screen
      - assertVisible: "Notifications"

      # Test mark all as read button
      - runFlow:
          when:
            visible: "Mark all read"
          commands:
            - tapOn: "Mark all read"
            - waitForAnimationToEnd:
                timeout: 2000

# Test pull-to-refresh
- swipe:
    direction: DOWN
    duration: 500

- waitForAnimationToEnd:
    timeout: 3000

# Verify we're still on notifications screen
- assertVisible: "Notifications"

# Navigate away and back to test state persistence
- tapOn:
    point: "10%,91%"
- waitForAnimationToEnd

- tapOn:
    point: "70%,91%"
- waitForAnimationToEnd

- assertVisible: "Notifications"

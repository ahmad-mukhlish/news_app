appId: com.dhealth.news.news_app
---
# Article Interaction Test: Tests tapping and viewing news articles
# This test is meant to be called from other flows, assumes articles are already loaded
# NOTE: This test does not launch the app - it should be called after articles are visible


# Verify news cards are visible
- assertVisible:
    text: ".*News card.*"

# Verify semantic labels are present on news article card
- assertVisible:
    text: ".*Article title.*"
- assertVisible:
    text: ".*Article content.*"

# Check for optional semantic labels (may not always be present)
- runFlow:
    when:
      visible:
        text: ".*Article image.*"
    commands:
      - assertVisible:
          text: ".*Article image.*"

- runFlow:
    when:
      visible:
        text: ".*Article description.*"
    commands:
      - assertVisible:
          text: ".*Article description.*"

- runFlow:
    when:
      visible: ".*Article source.*"
    commands:
      - assertVisible:
          text: ".*Article source.*"

- runFlow:
    when:
      visible:
        text: ".*Open article in browser.*"
    commands:
      - assertVisible:
          text: ".*Open article in browser.*"

# Test tapping on first news article, should open browser
- tapOn:
    text: ".*News card.*"
    index: 0
- waitForAnimationToEnd:
    timeout: 3000

# Go back
- pressKey: Back
- waitForAnimationToEnd

# Scroll down a bit to see more articles
- scroll
- waitForAnimationToEnd:
    timeout: 2000

- scroll
- waitForAnimationToEnd:
    timeout: 2000

# Test tapping on another article after scrolling
- tapOn:
    text: ".*News card.*"
    index: 1
- waitForAnimationToEnd:
    timeout: 3000

# Go back
- pressKey: Back
- waitForAnimationToEnd

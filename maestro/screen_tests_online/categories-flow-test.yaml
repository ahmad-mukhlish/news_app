appId: com.dhealth.news.news_app
---
# Categories Flow Test: Tests category filtering functionality
# Verifies category chips, selection, and filtered news loading
# Then calls pagination test to verify category results are interactive

- launchApp:
    clearState: true

- waitForAnimationToEnd:
    timeout: 5000

# Navigate to Categories tab
- tapOn:
    text: ".*Categories tab.*"
- waitForAnimationToEnd

# Verify categories screen is visible
- assertVisible: "Categories"

# Wait for initial category content to load
- extendedWaitUntil:
    visible: ".*News card.*"
    timeout: 15000

# Scroll horizontally through category chips and assert each category renders
- assertVisible: "Business"
- assertVisible: "Entertainment"
- assertVisible: "General"
- assertVisible: ".*Category slider.*"

- swipe:
    from:
      text: ".*Category slider.*"
    direction: LEFT
    duration: 600

- assertVisible: "Health"
- assertVisible: "Science"

- swipe:
    from:
      text: ".*Category slider.*"
    direction: LEFT
    duration: 600

- assertVisible: "Sports"
- assertVisible: "Technology"

- swipe:
    direction: RIGHT
    duration: 600

# Test 1: Sports category
- tapOn: "Sports"
- waitForAnimationToEnd:
    timeout: 2000

# Wait for business news to load
- extendedWaitUntil:
    visible: ".*News card.*"
    timeout: 15000

## Verify business news loaded
- assertVisible:
    text: ".*News card.*"

# Test pagination and article interaction on business category
- runFlow: ../common_tests/pagination-test.yaml

- tapOn: "Technology"
- waitForAnimationToEnd:
    timeout: 2000

# Wait for technology news to load
- extendedWaitUntil:
    visible: ".*News card.*"
    timeout: 15000

# Verify technology news loaded
- assertVisible:
    text: ".*News card.*"
